<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;My Sims Notes! ✨&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.jsdelivr.net/npm/chart.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Base color variables for Light Mode (default) */</p>
<p class="p1"><span class="Apple-converted-space">        </span>:root {</p>
<p class="p1"><span class="Apple-converted-space">            </span>--bg-primary: #f8f9fa; /* Wikipedia's light gray background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--text-primary: #202122; /* Wikipedia's dark text */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--link-color: #3366cc; /* Wikipedia's standard blue link */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--link-hover-color: #204080; /* Darker blue on hover */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--border-color: #a2a9b1; /* Wikipedia's light border gray */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--card-bg: #ffffff; /* White card background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--header-bg: #eaecf0; /* Wikipedia's section header gray */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--button-bg: #eaecf0; /* Light button background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--button-text: #202122; /* Dark text on buttons */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--button-hover-bg: #e0e3e7; /* Slightly darker button on hover */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--table-header-bg: #eaecf0; /* Table header background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--table-row-odd-bg: #fdfdfd; /* Very light for odd rows */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--table-row-even-bg: #ffffff; /* White for even rows */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--status-alive: #28a745; /* Green for alive */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--status-dead: #dc3545; /* Red for dead */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--sim-name-header-text: #202122; /* Dark text for sim name in header */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--sim-title-header-text: #4d5156; /* Muted text for sim title in header */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--highlight-active: #6c8ebf; /* A subtle highlight color for active elements */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--personality-low-color: #e67c73; /* Reddish for low end */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--personality-high-color: #72a6e6; /* Bluish for high end */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--personality-balanced-color: #778899; /* Grey for balanced */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Dark Mode variables */</p>
<p class="p1"><span class="Apple-converted-space">        </span>body.dark-theme {</p>
<p class="p1"><span class="Apple-converted-space">            </span>--bg-primary: #1c1c1c; /* Dark gray background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--text-primary: #f0f0f0; /* Light text */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--link-color: #64b5f6; /* Lighter blue link */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--link-hover-color: #42a5f5; /* Slightly brighter blue on hover */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--border-color: #444444; /* Darker border gray */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--card-bg: #2d2d2d; /* Dark card background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--header-bg: #3c3c3c; /* Darker section header gray */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--button-bg: #3c3c3c; /* Dark button background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--button-text: #f0f0f0; /* Light text on buttons */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--button-hover-bg: #4f4f4f; /* Slightly lighter button on hover */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--table-header-bg: #3c3c3c; /* Table header background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--table-row-odd-bg: #2d2d2d; /* Darker for odd rows */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--table-row-even-bg: #2a2a2a; /* Even darker for even rows */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--status-alive: #2ecc71; /* Brighter green for alive */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--status-dead: #e74c3c; /* Brighter red for dead */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--sim-name-header-text: #f0f0f0; /* Light text for sim name in header */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--sim-title-header-text: #b0b0b0; /* Muted light text for sim title in header */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--highlight-active: #81c784; /* A subtle highlight color for active elements */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--personality-low-color: #cc524a; /* Darker red for low end */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--personality-high-color: #4a8ed9; /* Darker blue for high end */</p>
<p class="p1"><span class="Apple-converted-space">            </span>--personality-balanced-color: #556677; /* Darker grey for balanced */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* General Body and Text Styles */</p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--bg-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s ease, color 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.6;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-sizing: border-box;</p>
<p class="p1"><span class="Apple-converted-space">            </span>min-height: 100vh; /* Ensure body takes full height for dark mode effect */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>h1, h2, h3, h4 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600; /* Bolder headings */</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Link Styling */</p>
<p class="p1"><span class="Apple-converted-space">        </span>a {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-decoration: underline;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: color 0.2s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>a:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-hover-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Panels and Cards - Clean, flat look */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sleek-panel, .trading-card-redesign, .family-overview-section, .spreadsheet-container, .graveyard-section, .homeless-sims-section {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 3px rgba(0,0,0,0.08); /* Subtle shadow for definition */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px; /* Slightly rounded corners */</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow: hidden;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sleek-panel:hover, .trading-card-redesign:hover, .family-overview-section:hover, .spreadsheet-container:hover, .graveyard-section:hover, .homeless-sims-section:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-2px); /* Slight lift on hover */</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 4px 8px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Specific header colors for sections */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sleek-panel h2, .sleek-panel h3, .sleek-panel h4,</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-overview-section h4,</p>
<p class="p1"><span class="Apple-converted-space">        </span>.graveyard-section h3,</p>
<p class="p1"><span class="Apple-converted-space">        </span>.homeless-sims-section h3,</p>
<p class="p1"><span class="Apple-converted-space">        </span>.notes-section h2 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary); /* Ensures headers are visible */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-bottom: 1px solid var(--border-color); /* Simple border bottom */</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-bottom: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* World Header - Wikipedia style (simple, clean) */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.world-header {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--header-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 3px rgba(0,0,0,0.08);</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0.5rem; /* Adjusted gap: Reduced from 0.75rem to 0.5rem */</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.world-header h1 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 2.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 700; /* Bold */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>@media (min-width: 768px) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>.world-header h1 {</p>
<p class="p1"><span class="Apple-converted-space">                </span>font-size: 3.2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.world-header p {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary); /* Ensure contrast */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Theme Toggle Button */</p>
<p class="p1"><span class="Apple-converted-space">        </span>#themeToggle {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: color 0.2s ease;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 50%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>#themeToggle:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-hover-bg);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Scrollbar */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.scrollable-list {</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow-y: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>scrollbar-width: thin;</p>
<p class="p1"><span class="Apple-converted-space">            </span>scrollbar-color: var(--border-color) var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.scrollable-list::-webkit-scrollbar-thumb {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 2px solid var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.scrollable-list::-webkit-scrollbar-track {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Families Sidebar and its content */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.families-sidebar {</p>
<p class="p1"><span class="Apple-converted-space">            </span>/* flex-grow for vertical expansion */</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex-grow: 1; /* Allow it to grow to fill space */</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow-y: auto; /* Enable scrolling if content overflows */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Family Item (unselected family rectangle) */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #eaecf0; /* Light grey background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: all 0.2s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.7rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #202122; /* Black text */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Dark mode override for unselected family item */</p>
<p class="p1"><span class="Apple-converted-space">        </span>body.dark-theme .family-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #1A2B4C; /* Darker blue background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #ffffff; /* White text */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-item h3 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: inherit; /* Inherit color from parent (.family-item) */</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1.25rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-item:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-hover-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 4px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No translation */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Dark mode override for unselected family item on hover */</p>
<p class="p1"><span class="Apple-converted-space">        </span>body.dark-theme .family-item:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #0F1A2D; /* Even darker blue on hover */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #ffffff;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Selected Family Item (blue family rectangle) */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-item.selected-family {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #3366cc; /* Blue background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-color: #204080; /* Darker blue border for contrast */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #ffffff; /* White text */</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 4px rgba(0,0,0,0.15);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No scale or rotation */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Dark mode override for selected family item */</p>
<p class="p1"><span class="Apple-converted-space">        </span>body.dark-theme .family-item.selected-family {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #3465cc; /* Changed to 3465cc for dark mode selected family */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #ffffff; /* White text */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-color: #0F1A2D; /* A slightly lighter border than background for subtle definition */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-item.selected-family h3 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: inherit; /* Inherit color from parent (.family-item.selected-family) */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-item + .family-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-item .expand-icon {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: transform 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-item.selected-family .expand-icon {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: rotate(90deg);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Sims List */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sims-list {</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-height: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow: hidden;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: max-height 0.4s ease-in-out, padding 0.4s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-top: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-bottom: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sims-list.expanded {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-top: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-bottom: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Sim Button (individual sim button - unselected) */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #ffffff; /* White background in oval */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #202122; /* Black text */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: all 0.2s ease-in-out, box-shadow 0.2s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.8rem 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px; /* Still a rectangle, but the request mentioned "oval" visually, can make it rounded */</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: left;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1.1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: none;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Dark mode override for unselected sim button */</p>
<p class="p1"><span class="Apple-converted-space">        </span>body.dark-theme .sim-button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #ffffff; /* White background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #202122; /* Black text */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-button:last-child {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-button:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-hover-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary); /* Keep text primary color on hover */</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateX(4px);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 4px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Selected Sim Button (clicked on sim - blue background button) */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-button.selected-sim {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #3366cc; /* Blue background button */</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #ffffff; /* White text */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-color: #204080; /* Darker blue border for contrast */</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 4px rgba(0,0,0,0.15);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No scale or rotation */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Dark mode override for selected sim button */</p>
<p class="p1"><span class="Apple-converted-space">        </span>body.dark-theme .sim-button.selected-sim {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #3366cc; /* Blue background button */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #ffffff; /* White text */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Sim Details Card */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.trading-card-redesign {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1.8rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No rotation */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.trading-card-redesign:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-2px);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.card-header-redesign {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--header-bg); /* Solid background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--sim-name-header-text); /* Ensure contrast */</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 3px rgba(0,0,0,0.08); /* Subtle shadow */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-top-left-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-top-right-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1rem 1.5rem; /* Adjusted padding */</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: -1.8rem -1.8rem 1.5rem -1.8rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">            </span>z-index: 2;</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow: hidden;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-bottom: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.card-header-redesign h2 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--sim-name-header-text); /* Ensure good contrast */</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 700; /* Make it bold */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.card-header-redesign .sim-name-display-redesign {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--sim-name-header-text); /* Ensure good contrast */</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 2.2rem; /* Adjusted font size */</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 700;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.card-header-redesign .sim-title-display {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--sim-title-header-text); /* Ensure good contrast */</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-style: normal; /* No italics */</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1.1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.card-content-redesign {</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-bottom-left-radius: 6px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-bottom-right-radius: 6px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.card-image-section-redesign {</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color); /* Simple border */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-bottom: 56.25%; /* 16:9 Aspect Ratio (height / width * 100) */</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 1.2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: none; /* No shadow */</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No rotation */</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow: hidden; /* Ensure image doesn't break rounded corners */</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative; /* Needed for absolute positioning of img */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.card-image-section-redesign img {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">            </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>object-fit: cover; /* Fill the container, cropping if necessary */</p>
<p class="p1"><span class="Apple-converted-space">            </span>object-position: center; /* Center the image within the container */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 2px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.section-block-style {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--bg-primary); /* Use primary background for sections */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 1.2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow: hidden;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: inset 0 1px 2px rgba(0,0,0,0.05); /* Subtle inner shadow */</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s ease, border-color 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.section-block-style:first-of-type {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.section-block-style h4 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-bottom: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-bottom: 0.4rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1.2rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.section-block-style h4 .sim-stat-icon {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-color); /* Wikipedia blue for icons */</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-right: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-bio-box-redesign p, .notes-section p {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.5;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-quote-box p {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-quote-box span {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-stat-icon {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-stat-label-redesign {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.95rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-stat-value-redesign {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.95rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>white-space: normal;</p>
<p class="p1"><span class="Apple-converted-space">            </span>word-break: break-word;</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow-wrap: break-word;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: inline-block;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: calc(100% - 60px);</p>
<p class="p1"><span class="Apple-converted-space">            </span>vertical-align: top;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.3;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-stat-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0.4rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Spacing for Key Details and Bio */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.details-and-skills-grid {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 1.8rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Style for clickable partner names */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.partner-link {</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-decoration: underline;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: normal;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.partner-link:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-hover-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.status-alive { color: var(--status-alive); font-weight: bold; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.status-dead { color: var(--status-dead); font-weight: bold; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* New styles for the skills list */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-skills-list {</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 0.6rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.4rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--bg-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-skills-list-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.2rem 0.4rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: inset 0 1px 2px rgba(0,0,0,0.02);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s ease, border-color 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-skills-list-item-label {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-skills-list-item-value {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-color); /* Use link color for emphasis */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-trait-item-redesign {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--bg-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.95rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.3rem 0.7rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s ease, border-color 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.hobbies-list li {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>list-style: disc; /* Standard disc bullet */</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-left: 1.25rem; /* Indent for bullet */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.hobbies-list li::before {</p>
<p class="p1"><span class="Apple-converted-space">            </span>content: none; /* Remove custom bullet */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Age Icons Container */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sim-age-icons-container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.5rem 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 1.2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-top: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-bottom: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--header-bg); /* Use header background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s ease, border-color 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.age-icon {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 50%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-bg); /* Button background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: none; /* No shadow */</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 2em;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 2em;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex; /* Center emoji */</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center; /* Center emoji */</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center; /* Center emoji */</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.2s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.age-icon:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-hover-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-color: var(--link-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: scale(1.05);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.age-icon.active-age-icon {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--highlight-active); /* Highlight active age */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-color: var(--link-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 4px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: scale(1.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>animation: none; /* Remove pulse animation */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Personality Display */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.personality-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: space-between;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.4rem 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Adjustments for the new format */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.personality-item-label {</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex-grow: 1; /* Allows it to take up available space */</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: left;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500; /* Regular weight for the combined label */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.personality-item-value {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-left: 0.5rem; /* Space between label and value */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-color); /* Link color for the value itself */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Highlight for personality traits on the value */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.personality-item-value.low {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--personality-low-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.personality-item-value.high {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--personality-high-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.personality-item-value.balanced {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--personality-balanced-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Family Overview Section */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-overview-section h4 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-bottom: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-bottom: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-overview-section h4 .fas.fa-home {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-right: 0.4rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-overview-section h4 .family-name-in-header {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-overview-section .family-bio-detail, .family-overview-section .family-bio-text-content {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-overview-section .family-bio-detail {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.4;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-overview-section .family-bio-detail .detail-value {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary); /* Consistent text color */</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: inline-block;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-left: 0.25rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-overview-section .family-bio-text-content {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-overview-section .family-bio-text-content h5 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-bottom: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-bottom: 0.3rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1.15rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.family-overview-section .family-bio-text-content p {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.5;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Spreadsheet */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.spreadsheet-container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-top: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No rotation */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.spreadsheet-container:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-2px);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sims-table th, .sims-table td {</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color); /* Solid borders for table */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: normal;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sims-table th {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--table-header-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-bottom: 2px solid var(--link-color); /* Accent border */</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.9rem; /* Smaller font for headers */</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.6rem 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>white-space: nowrap;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: left; /* Default text align */</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sims-table tbody tr:nth-child(odd) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--table-row-odd-bg);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sims-table tbody tr:nth-child(even) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--table-row-even-bg);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sims-table tbody tr:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-hover-bg); /* Hover background for rows */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sims-table td strong {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--status-alive); /* Use status green for strong */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sims-table .clickable-sim-name {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: normal; /* Regular weight */</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-decoration: underline;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sims-table .clickable-sim-name:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-hover-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Sortable table headers */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sortable-th {</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-right: 20px; /* Space for arrow icon */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.sortable-th .sort-icon {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">            </span>right: 8px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>top: 50%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-50%);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.7em;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: color 0.2s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sortable-th:hover .sort-icon {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sortable-th.asc .sort-icon::before {</p>
<p class="p1"><span class="Apple-converted-space">            </span>content: "\f0d8"; /* fa-caret-up */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sortable-th.desc .sort-icon::before {</p>
<p class="p1"><span class="Apple-converted-space">            </span>content: "\f0d7"; /* fa-caret-down */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.sortable-th:not(.asc):not(.desc) .sort-icon::before {</p>
<p class="p1"><span class="Apple-converted-space">            </span>content: "\f0dc"; /* fa-sort */</p>
<p class="p1"><span class="Apple-converted-space">            </span>opacity: 0.5;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Stories */</p>
<p class="p1"><span class="Apple-converted-space">        </span>#storyDisplayContent {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No rotation */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>#storyDisplayContent:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-2px);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>#storyDisplayContent h2 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>#storyDisplayContent p {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-list-in-card {</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-list-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--card-bg); /* Card background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.6rem 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No rotation */</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: all 0.2s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-list-item:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-hover-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 4px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No translation or tilt */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-list-item.selected-story-in-card {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--highlight-active);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-color: var(--link-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No tilt */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-list-item span {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Single Story Content */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-single-content-in-card {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow: visible;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No rotation */</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-single-content-in-card:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-2px);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 4px 8px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-back-button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--button-text);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.95rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-back-button:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-hover-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>filter: none; /* No brightness change */</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-1px);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 4px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-image-container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: none; /* No shadow */</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No rotation */</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow: hidden;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative; /* Needed for absolute positioning of img */</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-bottom: 56.25%; /* 16:9 Aspect Ratio */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-image-container img {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">            </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>object-fit: cover; /* Fill the container, cropping if necessary */</p>
<p class="p1"><span class="Apple-converted-space">            </span>object-position: center; /* Center the image within the container */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>#storyContent {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.5;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Graveyard Specific Styling */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.graveyard-section {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No rotation */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.graveyard-section:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-2px);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.graveyard-section h3 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.graveyard-section h3 .sim-stat-icon {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-right: 0.6rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--status-dead); /* Red for graveyard icon */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.graveyard-section p {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 1.2rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.graveyard-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.7rem 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No rotation */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.graveyard-item:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-2px);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 4px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-hover-bg);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.graveyard-item .graveyard-icon {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 2.2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--status-dead);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.graveyard-item h5 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.1;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.graveyard-item p {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.85rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.1;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Homeless Sims Section */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.homeless-sims-section {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.homeless-sims-section:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-2px);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.homeless-sims-section h3 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.homeless-sims-section h3 .sim-stat-icon {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-right: 0.6rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--link-color); /* Use link color for homeless icon */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.homeless-sim-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.7rem 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.homeless-sim-item:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-2px);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 4px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-hover-bg);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.homeless-sim-item h5 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.1;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.homeless-sim-item p {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.85rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--text-primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.1;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Responsive adjustments */</p>
<p class="p1"><span class="Apple-converted-space">        </span>@media (min-width: 768px) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>.main-layout-grid {</p>
<p class="p1"><span class="Apple-converted-space">                </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">                </span>flex-direction: row;</p>
<p class="p1"><span class="Apple-converted-space">                </span>gap: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>.families-sidebar {</p>
<p class="p1"><span class="Apple-converted-space">                </span>flex-basis: 280px;</p>
<p class="p1"><span class="Apple-converted-space">                </span>flex-shrink: 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>flex-grow: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>.main-content-area {</p>
<p class="p1"><span class="Apple-converted-space">                </span>flex-grow: 1;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Static Navigation Bar - Flat, tab-like buttons */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.static-nav-bar {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.6rem 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--card-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex-wrap: wrap;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: none; /* No rotation */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.static-nav-bar button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--button-text);</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.5rem 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>white-space: nowrap;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.static-nav-bar button:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-1px);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 1px 4px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--button-hover-bg);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Specific colors for nav buttons (adjusted for general scheme) */</p>
<p class="p1"><span class="Apple-converted-space">        </span>#showNeighborhoodStoriesBtn { background-color: var(--button-bg); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#showNeighborhoodStoriesBtn:hover { background-color: var(--button-hover-bg); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#showSpreadsheetBtn { background-color: var(--button-bg); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#showSpreadsheetBtn:hover { background-color: var(--button-hover-bg); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#showGraveyardBtn { background-color: var(--button-bg); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#showGraveyardBtn:hover { background-color: var(--button-hover-bg); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#showNotesBtn { background-color: var(--button-bg); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#showNotesBtn:hover { background-color: var(--button-hover-bg); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#showHomelessSimsBtn { background-color: var(--button-bg); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#showHomelessSimsBtn:hover { background-color: var(--button-hover-bg); }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Mobile adjustments for nav bar */</p>
<p class="p1"><span class="Apple-converted-space">        </span>@media (max-width: 767px) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>.static-nav-bar {</p>
<p class="p1"><span class="Apple-converted-space">                </span>flex-direction: row;</p>
<p class="p1"><span class="Apple-converted-space">                </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">                </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">                </span>padding: 0.8rem;</p>
<p class="p1"><span class="Apple-converted-space">                </span>gap: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">                </span>border-radius: 8px;</p>
<p class="p1"><span class="Apple-converted-space">                </span>max-width: calc(100% - 2rem);</p>
<p class="p1"><span class="Apple-converted-space">                </span>margin-left: auto;</p>
<p class="p1"><span class="Apple-converted-space">                </span>margin-right: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>.static-nav-bar button {</p>
<p class="p1"><span class="Apple-converted-space">                </span>width: auto;</p>
<p class="p1"><span class="Apple-converted-space">                </span>flex-grow: 1;</p>
<p class="p1"><span class="Apple-converted-space">                </span>min-width: fit-content;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Image Modal Styles */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.image-modal-overlay {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">            </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: rgba(0, 0, 0, 0.7); /* Dark overlay */</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>z-index: 1000;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: opacity 0.3s ease, visibility 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">            </span>opacity: 0; /* Start hidden */</p>
<p class="p1"><span class="Apple-converted-space">            </span>visibility: hidden; /* Start hidden for accessibility */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.image-modal-overlay.visible {</p>
<p class="p1"><span class="Apple-converted-space">            </span>opacity: 1;</p>
<p class="p1"><span class="Apple-converted-space">            </span>visibility: visible;</p>
<p class="p1"><span class="Apple-converted-space">            </span>pointer-events: auto; /* Enable interactions when visible */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Ensure pointer-events are off when hidden */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.image-modal-overlay:not(.visible) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>pointer-events: none;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.image-modal-content {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 90%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-height: 90%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--card-bg); /* Match card background */</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 8px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 5px 15px rgba(0,0,0,0.3);</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex; /* For centering the image if needed */</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.image-modal-content img {</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: block; /* Remove extra space below image */</p>
<p class="p1"><span class="Apple-converted-space">            </span>object-fit: contain; /* Ensure entire image is visible, might letterbox */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 4px; /* Match panel border-radius */</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.image-modal-close {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">            </span>top: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>right: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: var(--button-bg);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--button-text);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid var(--border-color);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 50%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 30px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 30px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1.2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;</p>
<p class="p1"><span class="Apple-converted-space">            </span>z-index: 1001; /* Ensure close button is on top */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.image-modal-close:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--status-dead); /* Red for close button */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: scale(1.1);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body class="p-4 md:p-8"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="main-layout-grid flex flex-col md:flex-row gap-6 max-w-7xl mx-auto"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="families-sidebar sleek-panel p-6 md:w-72 md:flex-shrink-0 flex flex-col"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2 class="text-2xl font-bold mb-4 flex items-center justify-between relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>Families &lt;i class="fas fa-users"&gt;&lt;/i&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="familyList" class="scrollable-list flex-grow relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Family list will be dynamically populated here --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="main-content-area flex flex-col gap-3 flex-grow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="world-header p-6 rounded-lg text-center flex-shrink-0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="flex justify-between items-center mb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h1 id="worldNameDisplay" class="flex-grow text-4xl md:text-5xl font-extrabold text-center"&gt;&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button id="themeToggle" class="ml-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;i class="fas fa-sun"&gt;&lt;/i&gt; &lt;!-- Sun icon for light mode, will change to moon in dark mode --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p id="worldDescriptionDisplay" class="text-lg md:text-xl"&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="staticNavBar" class="static-nav-bar"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button id="showNeighborhoodStoriesBtn" class="px-5 py-2 rounded-md font-bold"&gt;Neighborhood Stories&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button id="showSpreadsheetBtn" class="px-5 py-2 rounded-md font-bold"&gt;All Sims&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button id="showHomelessSimsBtn" class="px-5 py-2 rounded-md font-bold"&gt;Homeless Sims&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button id="showGraveyardBtn" class="px-5 py-2 rounded-md font-bold"&gt;Graveyard&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button id="showNotesBtn" class="px-5 py-2 rounded-md font-bold"&gt;Notes&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="contentDisplayArea" class="flex-grow flex flex-col"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="simDetailsCard" class="trading-card-redesign hidden flex-col flex-grow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="card-header-redesign relative"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h2 id="simNameDisplay" class="sim-name-display-redesign text-3xl md:text-4xl font-extrabold mb-1"&gt;&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p id="simTitleDisplay" class="sim-title-display text-lg md:text-2xl font-medium"&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="card-content-redesign flex flex-col flex-grow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="card-image-section-redesign rounded-md" onclick="openImageModal(document.getElementById('simImage').src)"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;img id="simImage" src="https://via.placeholder.co/400x225/3182CE/C2D0E6?text=Sim+Image" alt="Sim Image" class="w-full h-full object-cover rounded-md"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div id="simAgeIconsContainer" class="sim-age-icons-container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="sim-bio-box-redesign section-block-style"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h4 class="text-xl font-semibold mb-3 flex items-center"&gt;&lt;i class="fas fa-book sim-stat-icon"&gt;&lt;/i&gt; Bio&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p id="simBioText" class="text-base leading-relaxed"&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="grid grid-cols-1 md:grid-cols-2 gap-4 flex-grow details-and-skills-grid"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="sim-details-section section-block-style"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;h4 class="text-xl font-semibold mb-3 flex items-center"&gt;&lt;i class="fas fa-info-circle sim-stat-icon"&gt;&lt;/i&gt; Key Details&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div class="sim-details-list flex flex-col gap-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div class="sim-stat-item"&gt;&lt;span class="sim-stat-label-redesign"&gt;Age:&lt;/span&gt; &lt;span id="simAge" class="sim-stat-value-redesign"&gt;&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div class="sim-stat-item"&gt;&lt;span class="sim-stat-label-redesign"&gt;Gender:&lt;/span&gt; &lt;span id="simGender" class="sim-stat-value-redesign"&gt;&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div class="sim-stat-item"&gt;&lt;span class="sim-stat-label-redesign"&gt;Status:&lt;/span&gt; &lt;span id="simStatus" class="sim-stat-value-redesign"&gt;&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div class="sim-stat-item"&gt;&lt;span class="sim-stat-label-redesign"&gt;Occult Status:&lt;/span&gt; &lt;span id="simOccultStatus" class="sim-stat-value-redesign"&gt;&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div class="sim-stat-item"&gt;&lt;span class="sim-stat-label-redesign"&gt;Career:&lt;/span&gt; &lt;span id="simCareer" class="sim-stat-value-redesign"&gt;&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div class="sim-stat-item"&gt;&lt;span class="sim-stat-label-redesign"&gt;Aspiration:&lt;/span&gt; &lt;span id="simAspiration" class="sim-stat-value-redesign"&gt;&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div class="sim-stat-item"&gt;&lt;span class="sim-stat-label-redesign"&gt;Zodiac:&lt;/span&gt; &lt;span id="simZodiac" class="sim-stat-value-redesign"&gt;&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div class="sim-stat-item"&gt;&lt;span class="sim-stat-label-redesign"&gt;Partner:&lt;/span&gt; &lt;span id="simPartners" class="sim-stat-value-redesign"&gt;&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div class="sim-stat-item"&gt;&lt;span class="sim-stat-label-redesign"&gt;Parents:&lt;/span&gt; &lt;span id="simParents" class="sim-stat-value-redesign"&gt;&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div class="sim-stat-item"&gt;&lt;span class="sim-stat-label-redesign"&gt;Children:&lt;/span&gt; &lt;span id="simChildren" class="sim-stat-value-redesign"&gt;&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="sim-skills-section section-block-style"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;h4 class="text-xl font-semibold mb-3 flex items-center"&gt;&lt;i class="fas fa-star sim-stat-icon"&gt;&lt;/i&gt; Skills&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div id="simSkillsList" class="sim-skills-list"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div id="simPersonalitySection" class="sim-personality-section section-block-style col-span-1 md:col-span-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;h4 class="text-xl font-semibold mb-3 flex items-center"&gt;&lt;i class="fas fa-smile sim-stat-icon"&gt;&lt;/i&gt; Personality&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div id="simPersonalityList" class="flex flex-col gap-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="sim-traits-section section-block-style col-span-1 md:col-span-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;h4 class="text-xl font-semibold mb-3 flex items-center"&gt;&lt;i class="fas fa-tags sim-stat-icon"&gt;&lt;/i&gt; Traits&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div id="simTraitList" class="sim-trait-list-redesign flex flex-wrap gap-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="sim-hobbies-section section-block-style"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h4 class="text-xl font-semibold mb-3 flex items-center"&gt;&lt;i class="fas fa-gamepad sim-stat-icon"&gt;&lt;/i&gt; Hobbies &amp; Interests&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;ul id="simHobbiesList" class="hobbies-list list-none pl-0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/ul&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="notes-section section-block-style"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h4 class="text-xl font-semibold mb-3 flex items-center"&gt;&lt;i class="fas fa-clipboard sim-stat-icon"&gt;&lt;/i&gt; Notes&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p id="simNotes" class="text-base leading-relaxed"&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="familyOverviewContent" class="family-overview-section hidden flex-col flex-grow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h4 class="mb-4 flex items-center relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;i class="fas fa-home mr-2"&gt;&lt;/i&gt; &lt;span id="familyOverviewTitleName" class="family-name-in-header"&gt;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="family-bio-detail mb-3 relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span class="font-normal"&gt;Location:&lt;br&gt;&lt;/span&gt; &lt;span id="familyLocation" class="detail-value"&gt;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="family-bio-detail mb-3 relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span class="font-normal"&gt;Number of Members:&lt;br&gt;&lt;/span&gt; &lt;span id="familyMemberCount" class="detail-value"&gt;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="family-bio-detail mb-3 relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span class="font-normal"&gt;Funds:&lt;br&gt;&lt;/span&gt; &lt;span id="familyFunds" class="detail-value"&gt;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="family-bio-text-content mt-6 relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h5 class="text-xl font-semibold mb-2"&gt;Biography:&lt;/h5&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p id="familyBiography"&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="spreadsheetView" class="spreadsheet-container collapsed hidden flex-col flex-grow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="collapsible-content scrollable max-h-0 overflow-hidden transition-all duration-400 ease-in-out relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="overflow-x-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;table class="sims-table min-w-full bg-white bg-opacity-70 rounded-lg overflow-hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;th class="py-3 px-4 sortable-th" data-sort="name"&gt;Name&lt;i class="fas fa-sort sort-icon"&gt;&lt;/i&gt;&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;th class="py-3 px-4 sortable-th" data-sort="family"&gt;Family&lt;i class="fas fa-sort sort-icon"&gt;&lt;/i&gt;&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;th class="py-3 px-4 sortable-th" data-sort="age"&gt;Age&lt;i class="fas fa-sort sort-icon"&gt;&lt;/i&gt;&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;th class="py-3 px-4 sortable-th" data-sort="status"&gt;Status&lt;i class="fas fa-sort sort-icon"&gt;&lt;/i&gt;&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;th class="py-3 px-4 sortable-th" data-sort="career"&gt;Career&lt;i class="fas fa-sort sort-icon"&gt;&lt;/i&gt;&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;th class="py-3 px-4 sortable-th" data-sort="aspiration"&gt;Aspiration&lt;i class="fas fa-sort sort-icon"&gt;&lt;/i&gt;&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;tbody id="simsTableBody"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/table&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="storyDisplayContent" class="sleek-panel hidden flex-col flex-grow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h2 class="text-2xl font-bold mb-4 flex items-center relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>Neighborhood Stories</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/h2&gt;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="storyListContainer" class=""&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div id="storyList" class="story-list-in-card flex flex-col scrollable-list max-h-96"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="singleStoryContainer" class="hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button class="story-back-button px-4 py-2 rounded-md" onclick="showStoryList()"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;i class="fas fa-arrow-left mr-2"&gt;&lt;/i&gt;Back to Stories</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="story-image-container" onclick="openImageModal(document.getElementById('storyImage').src)"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;img id="storyImage" src="https://placehold.co/400x225/EF5350/E2E8F0?text=Story%20Image" alt="Story Image" class="w-full h-full object-cover rounded-md"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div id="storyContent" class="story-single-content-in-card p-4 rounded-md text-base leading-relaxed"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="graveyardSection" class="graveyard-section hidden flex-col flex-grow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-2xl font-extrabold mb-4 flex items-center relative z-20"&gt;&lt;i class="fas fa-cross sim-stat-icon mr-2"&gt;&lt;/i&gt; The Graveyard&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-center text-secondary text-lg mb-4 relative z-20"&gt;Here lie the dearly departed Sims of Newcrest.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="graveyardGrid" class="graveyard-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="homelessSimsSection" class="homeless-sims-section hidden flex-col flex-grow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-2xl font-extrabold mb-4 flex items-center relative z-20"&gt;&lt;i class="fas fa-house-damage sim-stat-icon mr-2"&gt;&lt;/i&gt; Homeless Sims&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-center text-secondary text-lg mb-4 relative z-20"&gt;These Sims are currently without a permanent home.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="homelessSimsGrid" class="homeless-sims-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="notesSection" class="sleek-panel hidden flex-col flex-grow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h2 class="text-2xl font-bold mb-4 flex items-center relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;i class="fas fa-book-open mr-2"&gt;&lt;/i&gt; Collected Notes</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="notesContent" class="relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="imageModal" class="image-modal-overlay"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="image-modal-content"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;img id="modalImage" src="" alt="Full size image"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="image-modal-close" onclick="closeImageModal()"&gt;X&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- DATA GENERATION HELPERS (NEW) ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>const firstNames = ["Alice", "Bob", "Charlie", "Diana", "Eve", "Frank", "Grace", "Henry", "Ivy", "Jack", "Karen", "Liam", "Mia", "Noah", "Olivia", "Peter", "Quinn", "Rachel", "Sam", "Tina", "Uma", "Victor", "Wendy", "Xavier", "Yara", "Zack"];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const lastNames = ["Smith", "Jones", "Williams", "Brown", "Davis", "Miller", "Wilson", "Moore", "Taylor", "Anderson", "Thomas", "Jackson", "White", "Harris", "Martin", "Thompson", "Garcia", "Martinez", "Robinson", "Clark"];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const titles = ["Aspiring Artist", "Local Baker", "Retired Detective", "Amateur Inventor", "Neighborhood Cat Lover", "Eccentric Scientist", "Struggling Musician", "Mysterious Stranger", "Friendly Neighbor", "Part-time Clown"];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const bios = [</p>
<p class="p1"><span class="Apple-converted-space">            </span>"A Sim with big dreams and a tiny budget. Always trying new things.",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Loves quiet evenings and a good book. Prefers solitude to parties.",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Known for their quirky sense of humor and even quirkier outfits.",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Always tinkering with gadgets, often with explosive results.",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"A true green thumb, their garden is their pride and joy.",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Enjoys long walks on the beach and philosophizing about plumbobs.",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"A social butterfly who knows everyone's secrets (and shares a few).",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Dedicated to their career, but always makes time for family.",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Has a mysterious past and an even more mysterious future.",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Just trying to get by in Newcrest, one day at a time."</p>
<p class="p1"><span class="Apple-converted-space">        </span>];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const careers = ["Unemployed", "Astronaut", "Criminal", "Culinary", "Doctor", "Painter", "Secret Agent", "Tech Guru", "Writer", "Athlete", "Gardener", "Fisherman"];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const aspirations = ["Freelance Botanist", "Master Chef", "Public Enemy", "Bodybuilder", "Painter Extraordinaire", "Nerd Brain", "Joke Star", "Soulmate", "Big Happy Family", "Successful Lineage", "Party Animal"];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const zodiacs = ["Aries", "Taurus", "Gemini", "Cancer", "Leo", "Virgo", "Libra", "Scorpio", "Sagittarius", "Capricorn", "Aquarius", "Pisces"];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const traits = ["Active", "Bookworm", "Clumsy", "Creative", "Family-Oriented", "Genius", "Good", "Goofball", "Insane", "Lazy", "Loves Outdoors", "Materialistic", "Mean", "Music Lover", "Neat", "Outgoing", "Perfectionist", "Romantic", "Slob", "Snob"];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const hobbies = ["Reading", "Writing", "Painting", "Gardening", "Fishing", "Cooking", "Playing video games", "Working out", "Playing musical instruments", "Collecting"];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const occultStatuses = ["Human", "Alien", "Vampire", "Spellcaster", "Mermaid", "Werewolf"];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const lifeStages = ["Young Adult", "Adult", "Elder"]; // For new generated sims</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Define lifeStagesIcons for the age icons</p>
<p class="p1"><span class="Apple-converted-space">        </span>const lifeStagesIcons = {</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Baby": "👶",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Toddler": "🧒",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Child": "👧",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Teen": "🧑‍🎤",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Young Adult": "👩‍🎓",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Adult": "🧑‍💼",</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Elder": "👵"</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function getRandomElement(arr) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>return arr[Math.floor(Math.random() * arr.length)];</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function getRandomNumber(min, max) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>return Math.floor(Math.random() * (max - min + 1)) + min;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function generateRandomSim(isHomeless = false, existingSimNames = []) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>let simName = `${getRandomElement(firstNames)} ${getRandomElement(lastNames)}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>while (existingSimNames.includes(simName)) { // Ensure unique names</p>
<p class="p1"><span class="Apple-converted-space">                </span>simName = `${getRandomElement(firstNames)} ${getRandomElement(lastNames)}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>existingSimNames.push(simName);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const age = getRandomElement(lifeStages);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const gender = getRandomElement(["Male", "Female"]);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const status = getRandomElement(["Alive", "Dead"]);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const career = getRandomElement(careers);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const occultStatus = getRandomElement(occultStatuses);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const numSkills = getRandomNumber(2, 5);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const skills = {};</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (let i = 0; i &lt; numSkills; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>skills[getRandomElement(["Logic", "Charisma", "Mischief", "Finance", "Gourmet Cooking", "Writing", "Painting", "Fitness", "Parenting", "Programming", "Violin", "Piano", "Gardening"])] = getRandomNumber(1, 10);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>const numTraits = getRandomNumber(2, 4);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const selectedTraits = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>while (selectedTraits.length &lt; numTraits) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const trait = getRandomElement(traits);</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!selectedTraits.includes(trait)) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>selectedTraits.push(trait);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>const numHobbies = getRandomNumber(1, 3);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const selectedHobbies = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>while (selectedHobbies.length &lt; numHobbies) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const hobby = getRandomElement(hobbies);</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!selectedHobbies.includes(hobby)) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>selectedHobbies.push(hobby);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>return {</p>
<p class="p1"><span class="Apple-converted-space">                </span>name: simName,</p>
<p class="p1"><span class="Apple-converted-space">                </span>title: getRandomElement(titles),</p>
<p class="p1"><span class="Apple-converted-space">                </span>image: `https://placehold.co/400x225/DCDCDC/202122?text=${encodeURIComponent(simName.split(' ')[0])}`,</p>
<p class="p1"><span class="Apple-converted-space">                </span>bio: getRandomElement(bios),</p>
<p class="p1"><span class="Apple-converted-space">                </span>age: age,</p>
<p class="p1"><span class="Apple-converted-space">                </span>gender: gender,</p>
<p class="p1"><span class="Apple-converted-space">                </span>status: status,</p>
<p class="p1"><span class="Apple-converted-space">                </span>occultStatus: occultStatus,</p>
<p class="p1"><span class="Apple-converted-space">                </span>career: career,</p>
<p class="p1"><span class="Apple-converted-space">                </span>careerLevel: career === "Unemployed" ? 0 : getRandomNumber(1, 10),</p>
<p class="p1"><span class="Apple-converted-space">                </span>aspiration: getRandomElement(aspirations),</p>
<p class="p1"><span class="Apple-converted-space">                </span>zodiac: getRandomElement(zodiacs),</p>
<p class="p1"><span class="Apple-converted-space">                </span>partners: [], // For simplicity, new sims start without partners/parents/children</p>
<p class="p1"><span class="Apple-converted-space">                </span>parents: [],</p>
<p class="p1"><span class="Apple-converted-space">                </span>children: [],</p>
<p class="p1"><span class="Apple-converted-space">                </span>skills: skills,</p>
<p class="p1"><span class="Apple-converted-space">                </span>traits: selectedTraits,</p>
<p class="p1"><span class="Apple-converted-space">                </span>hobbies: selectedHobbies,</p>
<p class="p1"><span class="Apple-converted-space">                </span>notes: "No specific notes yet.",</p>
<p class="p1"><span class="Apple-converted-space">                </span>personality: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"sloppyNeat": getRandomNumber(1, 10),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"shyOutgoing": getRandomNumber(1, 10),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"lazyActive": getRandomNumber(1, 10),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"seriousPlayful": getRandomNumber(1, 10),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"grouchyNice": getRandomNumber(1, 10)</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function generateRandomFamily(familyName, existingSimNames) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const numMembers = getRandomNumber(1, 4); // 1 to 4 members per new family</p>
<p class="p1"><span class="Apple-converted-space">            </span>const members = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (let i = 0; i &lt; numMembers; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>members.push(generateRandomSim(false, existingSimNames));</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>const familyLocation = getRandomElement(["Willow Creek", "Oasis Springs", "Newcrest", "Windenburg", "San Myshuno"]);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const familyFunds = `$${(getRandomNumber(100, 5000) * 1000).toLocaleString()}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const familyBiography = `The ${familyName} family, recently settled in ${familyLocation}, is a vibrant group known for their unique dynamics and aspirations. They are a new addition to the neighborhood, eager to make their mark.`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>return {</p>
<p class="p1"><span class="Apple-converted-space">                </span>familyBio: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>name: `${familyName} Family`,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>location: familyLocation,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>memberCount: members.length,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>funds: familyFunds,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>biography: familyBiography</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>members: members</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function generateRandomStory(existingSims) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const sim1 = getRandomElement(existingSims);</p>
<p class="p1"><span class="Apple-converted-space">            </span>let sim2 = getRandomElement(existingSims);</p>
<p class="p1"><span class="Apple-converted-space">            </span>while (sim1.name === sim2.name &amp;&amp; existingSims.length &gt; 1) { // Ensure different sim if possible</p>
<p class="p1"><span class="Apple-converted-space">                </span>sim2 = getRandomElement(existingSims);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const storyTemplates = [</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `${sim1.name}'s Unconventional Hobby Pays Off!`, content: `${sim1.name} surprised everyone by turning their obscure hobby (${getRandomElement(sim1.hobbies)}) into a local sensation! The townsfolk are now flocking to see their latest creation. Rumors suggest even ${sim2.name} has placed an order.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `Mystery Solved: ${sim2.name} Cracks the Case of the Missing Gnomes`, content: `The mysterious disappearance of garden gnomes across Newcrest has finally been solved, thanks to the astute observations of ${sim2.name}. It turns out the culprits were not mischievous sprites, but rather a particularly hungry squirrel collective. ${sim1.name} was initially suspected.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `${sim1.name} Challenges ${sim2.name} to a Cook-Off!`, content: `A culinary showdown is brewing! ${sim1.name}, confident in their cooking skills, has openly challenged ${sim2.name} to a cook-off at the local park. Tensions are high, and the smell of delicious (or disastrous) food is expected to fill the air. Spectators are already lining up.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `Strange Lights Over ${sim1.name}'s House`, content: `Neighbors reported strange, pulsating lights hovering above ${sim1.name}'s residence last night. While ${sim1.name} attributes it to 'just a faulty porch light,' many are whispering about alien encounters. ${sim2.name} claims to have seen a tiny green hand waving from a window.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `The Great Prank War: ${sim1.name} vs. ${sim2.name}`, content: `Newcrest is currently embroiled in a hilarious (and slightly chaotic) prank war between ${sim1.name} and ${sim2.name}. From glitter bombs in the mailbox to whoopee cushions on park benches, no one is safe. The latest victim was the local ice cream truck, which mysteriously started playing polka music.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `The Town Hero: ${sim1.name} Saves a Stranded Cat`, content: `A local feline found itself in a precarious position atop the tallest tree in Willow Creek, but thankfully, ${sim1.name} sprang into action! Using their surprisingly agile skills, they safely rescued the terrified cat, earning praise from grateful townies and a bewildered ${sim2.name}.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `${sim2.name} Discovers Ancient Artifact in Backyard`, content: `While digging for a new garden plot, ${sim2.name} unearthed what appears to be an ancient plumbob relic! Experts from the local museum have been called in, and the discovery is already drawing curious Sims from all over. ${sim1.name} is reportedly jealous of the find.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `New Restaurant Opens, Owned by ${sim1.name}`, content: `Foodies rejoice! A new restaurant, 'The Whimsical Spatula,' has opened its doors, owned and operated by the one and only ${sim1.name}. Early reviews are raving about the experimental menu and the surprisingly comfortable chairs. ${sim2.name} was seen leaving with a happy stomach and a doggy bag.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `Festival Mishap: ${sim2.name} Accidentally Wins Llama Race`, content: `During the annual Newcrest Llama Festival, ${sim2.name} found themselves accidentally entered into (and subsequently won) the notoriously competitive Llama Race. They claim it was a 'total fluke,' but their winning llama, 'Sir Gallops-a-Lot,' begs to differ. ${sim1.name} is already demanding a rematch.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `${sim1.name} Organizes Town-Wide Karaoke Night`, content: `Get ready to sing! ${sim1.name} has single-handedly organized a town-wide karaoke night at the local lounge. Early reports suggest a mix of truly horrendous and surprisingly brilliant vocal performances. ${sim2.name} is rumored to be practicing their power ballad in secret.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `${sim2.name}'s Science Experiment Goes Viral`, content: `A quirky science experiment conducted by ${sim2.name} involving self-stirring coffee and miniature tornadoes has become an unexpected sensation on SimTube. Their viewership has skyrocketed, much to the confusion of ${sim1.name}, who prefers traditional methods of coffee preparation.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `Local Ghost Baffled by ${sim1.name}'s Unflappable Demeanor`, content: `The resident ghost of the Goth Mansion, known for its spine-chilling antics, has reportedly become frustrated by ${sim1.name}'s complete lack of fear. Every attempt to spook them is met with a polite nod or an offer of a warm beverage. The ghost is now seeking therapy. ${sim2.name} finds it amusing.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `${sim1.name} Starts a New Trend: Backward Walking`, content: `The latest craze sweeping Newcrest? Backward walking, championed by none other than ${sim1.name}. While initially confusing, many Sims are now embracing the unique form of exercise, though collisions are up by 200%. ${sim2.name} is attempting to monetize backward-walking lessons.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `Mysterious Lights Lead ${sim2.name} to Hidden Cave`, content: `Following peculiar flickering lights, adventurous ${sim2.name} stumbled upon a previously undiscovered cave on the outskirts of Oasis Springs. The cave is rumored to hold ancient secrets, or perhaps just a very large collection of dust bunnies. ${sim1.name} is waiting for the Netflix documentary.` },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ headline: `${sim1.name} Wins the Most Eccentric Hat Contest`, content: `The annual Newcrest Hat Contest saw its most unusual entry yet, with ${sim1.name} taking home first prize for their towering, multi-tiered confection adorned with live hummingbirds. The judges were both bewildered and impressed. ${sim2.name}'s hat, a simple flowerpot, came in last.` },</p>
<p class="p1"><span class="Apple-converted-space">            </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>return getRandomElement(storyTemplates);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- END DATA GENERATION HELPERS ---</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>let simData = {</p>
<p class="p1"><span class="Apple-converted-space">            </span>"worldInfo": {</p>
<p class="p1"><span class="Apple-converted-space">                </span>name: "Newcrest",</p>
<p class="p1"><span class="Apple-converted-space">                </span>description: "A blank canvas for your Sims' dreams (or nightmares). Build, explore, and create your own legacies here!"</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Landgraab": {</p>
<p class="p1"><span class="Apple-converted-space">                </span>"familyBio": {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>name: "Landgraab Family",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>location: "Oasis Springs",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>memberCount: 0, // Will be dynamically updated</p>
<p class="p1"><span class="Apple-converted-space">                    </span>funds: "$5,000,000",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>biography: "The illustrious Landgraab family, a pillar of the community, is known for their vast wealth and a slight tendency towards... corporate espionage. Nancy, the matriarch, rules with an iron fist, while Geoffrey tries to maintain a semblance of normalcy. Their son, Malcolm, struggles with the weight of expectation and a penchant for villainy."</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>"members": [</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"name": "Nancy Landgraab",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"title": "Corporate Mogul",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"image": "https://simscommunity.info/wp-content/uploads/2014/09/nancy.jpg",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"bio": "Nancy Landgraab is a formidable businesswoman, known for her sharp wit and even sharper business practices. She demands excellence and often gets it through sheer force of will (and a little bit of backroom dealing). Her home is a testament to her success, but her family life is... complicated.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"age": "Adult",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"gender": "Female",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"status": "Alive",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"occultStatus": "Human",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"career": "Criminal",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"careerLevel": 9, // Boss</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"aspiration": "Mansion Baron",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"zodiac": "Leo",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"partners": ["Geoffrey Landgraab"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"children": ["Malcolm Landgraab"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"skills": { "Logic": 8, "Charisma": 10, "Mischief": 7, "Finance": 9, "Gourmet Cooking": 5 },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"traits": ["Snob", "Materialistic", "Mean", "Business Savvy"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"hobbies": ["Counting money", "Making questionable business deals", "Ordering around her butler"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"notes": "Rumored to have a hidden vault in her basement. Obsessed with achieving ultimate wealth. Keeps a close eye on Malcolm's 'business ventures'.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"personality": {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"sloppyNeat": 9,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"shyOutgoing": 3,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"lazyActive": 3,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"seriousPlayful": 1,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"grouchyNice": 6</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"name": "Geoffrey Landgraab",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"title": "Good Guy",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"image": "https://simscommunity.info/wp-content/uploads/2014/09/geoffrey.jpg",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"bio": "Geoffrey Landgraab is Nancy's kind-hearted husband, often trying to be the moral compass of the family. He works as a Secret Agent but secretly wishes for a simpler life, away from the corporate schemes. He loves his family deeply, despite their quirks.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"age": "Adult",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"gender": "Male",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"status": "Alive",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"occultStatus": "Human",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"career": "Secret Agent",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"careerLevel": 5, // Field Agent</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"aspiration": "Good Guy",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"zodiac": "Cancer",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"partners": ["Nancy Landgraab"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"children": ["Malcolm Landgraab"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"skills": { "Charisma": 7, "Fitness": 6, "Logic": 5, "Parenting": 8 },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"traits": ["Good", "Family-Oriented", "Clumsy"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"hobbies": ["Gardening", "Playing with Malcolm (when he's not being evil)"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"notes": "Always tries to mediate family arguments. Wishes Malcolm would pursue a more wholesome career.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"personality": {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"sloppyNeat": 6,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"shyOutgoing": 8,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"lazyActive": 4,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"seriousPlayful": 5,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"grouchyNice": 10</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"name": "Malcolm Landgraab",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"title": "Aspiring Villain",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"image": "https://simscommunity.info/wp-content/uploads/2014/09/malcolm.jpg",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"bio": "Malcolm Landgraab, heir to the Landgraab fortune, has a mischievous streak a mile wide. While his mother wants him to follow in her legitimate business footsteps, Malcolm prefers a darker path, often dabbling in villainy and petty crime. He dreams of becoming a master villain, much to his father's dismay.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"age": "Young Adult",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"gender": "Male",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"status": "Dead",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"occultStatus": "Human",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"career": "Criminal",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"careerLevel": 3, // Henchman</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"aspiration": "Public Enemy",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"zodiac": "Scorpio",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"partners": [],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"parents": ["Nancy Landgraab", "Geoffrey Landgraab"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"children": [],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"skills": { "Mischief": 8, "Programming": 6, "Logic": 5, "Fitness": 4 },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"traits": ["Evil", "Genius", "Loves Outdoors"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"hobbies": ["Hacking computers", "Pranking unsuspecting Sims", "Mooching off his parents' wealth"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"notes": "Frequently tries to prank his mother, usually with disastrous results for himself. Has a secret lair in the attic he thinks no one knows about. Developing a super-secret evil laugh.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"personality": {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"sloppyNeat": 1,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"shyOutgoing": 3,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"lazyActive": 5,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"seriousPlayful": 10,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"grouchyNice": 1</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>]</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Goth": {</p>
<p class="p1"><span class="Apple-converted-space">                </span>"familyBio": {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>name: "Goth Family",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>location: "Willow Creek",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>memberCount: 0, // Will be dynamically updated</p>
<p class="p1"><span class="Apple-converted-space">                    </span>funds: "$1,500,000",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>biography: "The enigmatic Goth family resides in their hauntingly beautiful mansion, a place steeped in mystery and dark romanticism. Mortimer, a renowned author, and Bella, the captivating socialite, live a life of quiet intrigue with their daughter Cassandra. Whispers of Bella's mysterious disappearances often circulate."</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>"members": [</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"name": "Mortimer Goth",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"title": "Distinguished Author",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"image": "https://simscommunity.info/wp-content/uploads/2014/09/mortimer.jpg",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"bio": "Mortimer Goth is a highly respected author, known for his chilling tales and gothic sensibilities. He is a devoted husband and father, though often lost in his own thoughts and the world of his imagination. He cherishes his family and the quiet solitude of his mansion.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"age": "Adult",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"gender": "Male",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"status": "Alive",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"occultStatus": "Human",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"career": "Writer",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"careerLevel": 7, // Poet</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"aspiration": "Knowledge",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"zodiac": "Virgo",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"partners": ["Bella Goth"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"children": ["Cassandra Goth"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"skills": { "Writing": 10, "Charisma": 8, "Painting": 6, "Gourmet Cooking": 5 },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"traits": ["Genius", "Bookworm", "Family-Oriented"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"hobbies": ["Reading", "Writing in his study", "Stargazing"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"notes": "Always carries a small notebook for ideas. Fascinated by the occult, but too sensible to dabble himself. Secretly fears Bella's unexplained absences.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"personality": {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"sloppyNeat": 9,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"shyOutgoing": 2,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"lazyActive": 3,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"seriousPlayful": 1,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"grouchyNice": 6</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"name": "Bella Goth",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"title": "Mysterious Socialite",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"image": "https://simscommunity.info/wp-content/uploads/2014/09/bella.jpg",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"bio": "Bella Goth is the captivating and elegant matriarch of the Goth family. Known for her striking red dress and mysterious aura, she's a beloved figure in Willow Creek, despite her frequent and unexplained disappearances. Some say she's been abducted by aliens, others that she's merely exploring the far corners of the world.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"age": "Adult",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"gender": "Female",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"status": "Dead",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"occultStatus": "Human",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"career": "Secret Agent",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"careerLevel": 10, // Diamond Agent</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"aspiration": "Popularity",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"zodiac": "Libra",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"partners": ["Mortimer Goth"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"children": ["Cassandra Goth"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"skills": { "Charisma": 9, "Logic": 7, "Fitness": 8, "Mischief": 6 },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"traits": ["Outgoing", "Good", "Perfectionist"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"hobbies": ["Socializing", "Exploring new places (sometimes involuntarily)", "Playing chess"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"notes": "Has a peculiar connection to aliens. Her memory of past events is sometimes hazy. Always carries a mysterious locket.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"personality": {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"sloppyNeat": 10,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"shyOutgoing": 10,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"lazyActive": 9,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"seriousPlayful": 8,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"grouchyNice": 8</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"name": "Cassandra Goth",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"title": "Teen Prodigy",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"image": "https://simscommunity.info/wp-content/uploads/2014/09/cassandra.jpg",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"bio": "Cassandra Goth is the intelligent and artistic daughter of Mortimer and Bella. She's a bit of a loner, preferring her music and books to social gatherings, but she deeply cares for her family. She dreams of becoming a world-renowned musician.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"age": "Teen",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"gender": "Female",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"status": "Alive",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"occultStatus": "Human",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"career": "High School",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"careerLevel": 1, // Student</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"aspiration": "Music Lover",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"zodiac": "Pisces",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"partners": [],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"parents": ["Mortimer Goth", "Bella Goth"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"children": [],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"skills": { "Violin": 9, "Piano": 7, "Painting": 6, "Logic": 5 },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"traits": ["Music Lover", "Bookworm", "Loner"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"hobbies": ["Playing violin for hours", "Reading gothic novels", "Composing sad melodies"],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"notes": "Often found practicing violin in her room. Has a dark, poetic soul. Sometimes feels overshadowed by her mother's mysterious adventures.",</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"personality": {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"sloppyNeat": 5,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"shyOutgoing": 1,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"lazyActive": 6,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"seriousPlayful": 2,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"grouchyNice": 4</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>]</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>"homelessSims": [</p>
<p class="p1"><span class="Apple-converted-space">                </span>{</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"name": "Kyle Kyleson",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"title": "Homeless Townie",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"image": "https://simscommunity.info/wp-content/uploads/2022/07/Kyle_Kyleson.webp",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"bio": "Kyle Kyleson is a friendly, but somewhat hapless townie, often found wandering the streets of Willow Creek. He's trying to make his way in the world, but hasn't quite found his footing (or a permanent address) yet. Despite his circumstances, he remains optimistic and is always up for a chat.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"age": "Young Adult",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"gender": "Male",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"status": "Alive",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"occultStatus": "Human",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"career": "Unemployed",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"careerLevel": 0,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"aspiration": "Freelance Botanist",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"zodiac": "Gemini",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"partners": [],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"parents": [],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"children": [],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"skills": { "Gardening": 4, "Charisma": 3, "Comedy": 2 },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"traits": ["Good", "Clumsy", "Loves Outdoors"],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"hobbies": ["Collecting wild plants", "Telling bad jokes", "Sleeping under the stars"],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"notes": "Often tries to give unsolicited gardening advice. Has a surprisingly extensive knowledge of local flora. Smells faintly of compost.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"personality": {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"sloppyNeat": 2,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"shyOutgoing": 7,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"lazyActive": 6,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"seriousPlayful": 8,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"grouchyNice": 9</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>{</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"name": "Bella Goth (Clone)",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"title": "Mysterious Traveler",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"image": "https://static.wikia.nocookie.net/sims/images/4/4b/Bella_Goth_clone.png",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"bio": "A mysterious clone of Bella Goth, she sometimes appears in strange places. Her origins are unknown, even to herself, and she seems to be constantly searching for answers about her identity. She carries fragments of memories, but none are truly her own.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"age": "Adult",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"gender": "Female",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"status": "Alive",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"occultStatus": "Alien",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"career": "Unemployed",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"careerLevel": 0,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"aspiration": "Mystery Seeker",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"zodiac": "Unknown",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"partners": [],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"parents": [],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"children": [],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"skills": { "Logic": 5, "Mischief": 7, "Fitness": 6 },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"traits": ["Erratic", "Loves Outdoors", "Geek"],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"hobbies": ["Observing human behavior", "Trying to blend in (unsuccessfully)", "Searching for alien artifacts"],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"notes": "Often caught staring blankly into space. Carries a small, humming device. Has a peculiar fascination with garden gnomes.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"personality": {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"sloppyNeat": 7,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"shyOutgoing": 4,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"lazyActive": 5,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"seriousPlayful": 3,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>"grouchyNice": 5</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>]</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Consolidated Neighborhood Stories (will be cleared and repopulated)</p>
<p class="p1"><span class="Apple-converted-space">        </span>let neighborhoodStories = [];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- DYNAMIC DATA GENERATION ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>const NUM_ADDITIONAL_FAMILIES = 23;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const NUM_ADDITIONAL_STORIES = 50;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function generateAllDynamicData() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const existingSimNames = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Populate existing sim names to avoid duplicates</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (const familyKey in simData) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (familyKey === "worldInfo") continue;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const simsCollection = simData[familyKey].members || simData[familyKey];</p>
<p class="p1"><span class="Apple-converted-space">                </span>simsCollection.forEach(sim =&gt; existingSimNames.push(sim.name));</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Generate additional families</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (let i = 0; i &lt; NUM_ADDITIONAL_FAMILIES; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const familyNumber = Object.keys(simData).filter(k =&gt; k !== "worldInfo" &amp;&amp; k !== "homelessSims").length;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const newFamilyName = `Family ${familyNumber + 1}`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>simData[newFamilyName] = generateRandomFamily(newFamilyName, existingSimNames);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Get all current sims for story generation</p>
<p class="p1"><span class="Apple-converted-space">            </span>const allCurrentSims = getAllSims();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Generate additional stories</p>
<p class="p1"><span class="Apple-converted-space">            </span>neighborhoodStories = []; // Clear existing for full regeneration</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (let i = 0; i &lt; NUM_ADDITIONAL_STORIES; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (allCurrentSims.length &gt; 1) { // Need at least two sims for many story templates</p>
<p class="p1"><span class="Apple-converted-space">                    </span>neighborhoodStories.push(generateRandomStory(allCurrentSims));</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else if (allCurrentSims.length === 1) { // Fallback for single sim</p>
<p class="p1"><span class="Apple-converted-space">                    </span>neighborhoodStories.push({</p>
<p class="p1"><span class="Apple-converted-space">                        </span>headline: `${allCurrentSims[0].name}'s Daily Adventures`,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>content: `${allCurrentSims[0].name} had a typical day today, full of small victories and minor mishaps. Life in Newcrest continues to be interesting for this Sim.`</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else { // No sims available</p>
<p class="p1"><span class="Apple-converted-space">                    </span>neighborhoodStories.push({</p>
<p class="p1"><span class="Apple-converted-space">                        </span>headline: `A Quiet Day in Newcrest`,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>content: `Nothing much happened today. The sun rose, the sun set. Another peaceful day in an empty Newcrest.`</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- END DYNAMIC DATA GENERATION ---</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentSelectedFamily = 'Landgraab'; // Default selected family</p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentSelectedSim = null; // No sim selected by default</p>
<p class="p1"><span class="Apple-converted-space">        </span>let collectedSimNotes = new Map(); // Stores { simName: "noteContent" }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Global state for spreadsheet sorting</p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentSortColumn = null;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentSortDirection = 'asc'; // 'asc' or 'desc'</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Utility to find a sim by name across all families and homeless sims</p>
<p class="p1"><span class="Apple-converted-space">        </span>function findSimByName(simName) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (const familyKey in simData) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (familyKey === "worldInfo") continue;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const simsCollection = simData[familyKey].members || simData[familyKey]; // Handle both family members and direct homeless sims array</p>
<p class="p1"><span class="Apple-converted-space">                </span>const foundSim = simsCollection.find(sim =&gt; sim.name === simName);</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (foundSim) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return foundSim;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>return null;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Utility to find a sim's family name (or 'Homeless')</p>
<p class="p1"><span class="Apple-converted-space">        </span>function findSimFamilyName(simName) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (const familyKey in simData) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (familyKey === "worldInfo") continue;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (familyKey === "homelessSims") {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (simData[familyKey].some(sim =&gt; sim.name === simName)) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return 'Homeless';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const family = simData[familyKey];</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (family.members.some(sim =&gt; sim.name === simName)) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return family.familyBio.name.replace(' Family', '');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>return 'Unknown';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Function to hide all content sections</p>
<p class="p1"><span class="Apple-converted-space">        </span>function hideAllContentSections() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simDetailsCard').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simDetailsCard').classList.remove('flex');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('familyOverviewContent').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('familyOverviewContent').classList.remove('flex');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('spreadsheetView').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('spreadsheetView').classList.add('collapsed');</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Ensure the content inside spreadsheet is also collapsed</p>
<p class="p1"><span class="Apple-converted-space">            </span>const spreadsheetCollapsibleContent = document.getElementById('spreadsheetView').querySelector('.collapsible-content');</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (spreadsheetCollapsibleContent) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>spreadsheetCollapsibleContent.classList.add('collapsed');</p>
<p class="p1"><span class="Apple-converted-space">                </span>spreadsheetCollapsibleContent.style.maxHeight = '0';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('storyDisplayContent').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('storyDisplayContent').classList.remove('flex');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('graveyardSection').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('graveyardSection').classList.remove('flex');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('homelessSimsSection').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('homelessSimsSection').classList.remove('flex');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('notesSection').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('notesSection').classList.remove('flex');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function updateFamilyList() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const familyListElement = document.getElementById('familyList');</p>
<p class="p1"><span class="Apple-converted-space">            </span>familyListElement.innerHTML = ''; // Clear existing list</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>for (const familyName in simData) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>// Skip worldInfo and homelessSims when iterating through families for the sidebar</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (familyName === "worldInfo" || familyName === "homelessSims") continue;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const family = simData[familyName];</p>
<p class="p1"><span class="Apple-converted-space">                </span>const isSelectedFamily = familyName === currentSelectedFamily;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const familyItemClass = isSelectedFamily ? 'family-item selected-family' : 'family-item';</p>
<p class="p1"><span class="Apple-converted-space">                </span>const displayFamilyName = family.familyBio.name.replace(' Family', ''); // Remove " Family" suffix</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>let familyHtml = `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="${familyItemClass} p-2 rounded-md shadow-sm flex items-center justify-between" onclick="selectFamily('${familyName}')"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-lg font-semibold relative z-20"&gt;${displayFamilyName}&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;i class="fas fa-chevron-right expand-icon text-sm relative z-20"&gt;&lt;/i&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="sims-list ml-4 mt-1 ${isSelectedFamily ? 'expanded' : ''}"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Filter out dead sims for display in the family list</p>
<p class="p1"><span class="Apple-converted-space">                </span>const aliveMembers = family.members.filter(sim =&gt; sim.status === "Alive");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>aliveMembers.forEach(sim =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const isSelectedSim = isSelectedFamily &amp;&amp; currentSelectedSim &amp;&amp; sim.name === currentSelectedSim.name;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const simButtonClass = isSelectedSim ? 'sim-button selected-sim' : 'sim-button';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>familyHtml += `&lt;button class="${simButtonClass} px-3 py-1 rounded-full text-sm block w-full text-left" onclick="selectSim('${sim.name}')"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span class="relative z-20"&gt;${sim.name}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>familyHtml += `&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>familyListElement.innerHTML += familyHtml;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Ensure the currently selected family's expand icon and max-height are correct on initial load or list update</p>
<p class="p1"><span class="Apple-converted-space">            </span>const selectedFamilyElement = document.querySelector(`.family-item.selected-family`);</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (selectedFamilyElement) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const expandIcon = selectedFamilyElement.querySelector('.expand-icon');</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (expandIcon) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>expandIcon.style.transform = 'rotate(90deg)';</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>const simsList = selectedFamilyElement.nextElementSibling;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (simsList &amp;&amp; simsList.classList.contains('sims-list')) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>simsList.style.maxHeight = simsList.scrollHeight + 'px'; // Set max-height for the expanded list</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function selectFamily(familyName) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Collapse previously expanded family's sims list</p>
<p class="p1"><span class="Apple-converted-space">            </span>const prevSelectedFamilyElement = document.querySelector(`.family-item.selected-family`);</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (prevSelectedFamilyElement) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const prevSimsList = prevSelectedFamilyElement.nextElementSibling;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (prevSimsList &amp;&amp; prevSimsList.classList.contains('sims-list')) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>prevSimsList.classList.remove('expanded');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>prevSimsList.style.maxHeight = '0';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>prevSelectedFamilyElement.classList.remove('selected-family');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Reset icon rotation if it was previously selected</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const prevExpandIcon = prevSelectedFamilyElement.querySelector('.expand-icon');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if(prevExpandIcon) prevExpandIcon.style.transform = 'rotate(0deg)';</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// If the clicked family is already the current one, toggle it off</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (familyName === currentSelectedFamily &amp;&amp; document.querySelector(`.family-item[onclick="selectFamily('${familyName}')"]`).classList.contains('selected-family')) {</p>
<p class="p1"><span class="Apple-converted-space">                 </span>currentSelectedFamily = null; // Deselect family</p>
<p class="p1"><span class="Apple-converted-space">                 </span>hideAllContentSections(); // Hide all content when a family is collapsed</p>
<p class="p1"><span class="Apple-converted-space">                 </span>return; // Exit as we've just collapsed it</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>currentSelectedFamily = familyName;</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentSelectedSim = null; // Deselect sim when family is changed</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Expand the newly selected family's sims list</p>
<p class="p1"><span class="Apple-converted-space">            </span>const newSelectedFamilyElement = document.querySelector(`.family-item[onclick="selectFamily('${familyName}')"]`);</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (newSelectedFamilyElement) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const newSimsList = newSelectedFamilyElement.nextElementSibling;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (newSimsList &amp;&amp; newSimsList.classList.contains('sims-list')) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>newSimsList.classList.add('expanded');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>newSimsList.style.maxHeight = newSimsList.scrollHeight + 'px'; // Set max-height to current scrollHeight</p>
<p class="p1"><span class="Apple-converted-space">                    </span>newSelectedFamilyElement.classList.add('selected-family');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const newExpandIcon = newSelectedFamilyElement.querySelector('.expand-icon');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if(newExpandIcon) newExpandIcon.style.transform = 'rotate(90deg)';</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>updateFamilyList(); // This updates selection styles (though some styles are set above)</p>
<p class="p1"><span class="Apple-converted-space">            </span>hideAllContentSections(); // Hide everything first</p>
<p class="p1"><span class="Apple-converted-space">            </span>displayFamilyOverview(familyName); // Then show family overview</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function selectSim(simName) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Find the sim in any family or homeless sims</p>
<p class="p1"><span class="Apple-converted-space">            </span>let foundSim = null;</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (const familyKey in simData) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (familyKey === "worldInfo") continue;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const simsCollection = simData[familyKey].members || simData[familyKey]; // Handle both family members and direct homeless sims array</p>
<p class="p1"><span class="Apple-converted-space">                </span>const sim = simsCollection.find(s =&gt; s.name === simName);</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (sim) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>foundSim = sim;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>currentSelectedFamily = familyKey; // Set the family context for the selected sim</p>
<p class="p1"><span class="Apple-converted-space">                    </span>break;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!foundSim) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error(`Sim with name '${simName}' not found.`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>hideAllContentSections();</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>currentSelectedSim = foundSim;</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateFamilyList(); // Update to highlight selected sim and family</p>
<p class="p1"><span class="Apple-converted-space">            </span>hideAllContentSections(); // Hide everything first</p>
<p class="p1"><span class="Apple-converted-space">            </span>displaySimDetails(currentSelectedSim);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function updateSimImageForAge(sim, age) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const simImageElement = document.getElementById('simImage');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const encodedSimName = encodeURIComponent(sim.name);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const encodedAge = encodeURIComponent(age);</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Changed placeholder colors to fit Wikipedia theme, darker for text</p>
<p class="p1"><span class="Apple-converted-space">            </span>const imageUrl = `https://placehold.co/400x225/${encodeURIComponent('DCDCDC')}/${encodeURIComponent('202122')}?text=${encodedSimName}%20-%20${encodedAge}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>simImageElement.src = imageUrl;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update active class on age icons</p>
<p class="p1"><span class="Apple-converted-space">            </span>const ageIcons = document.querySelectorAll('#simAgeIconsContainer .age-icon');</p>
<p class="p1"><span class="Apple-converted-space">            </span>ageIcons.forEach(icon =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (icon.dataset.age === age) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>icon.classList.add('active-age-icon');</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>icon.classList.remove('active-age-icon');</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function displaySimDetails(sim) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!sim) { // Defensive check</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error("Attempted to display sim details for an undefined sim object.");</p>
<p class="p1"><span class="Apple-converted-space">                </span>hideAllContentSections(); // Ensure it's hidden</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const simDetailsCard = document.getElementById('simDetailsCard');</p>
<p class="p1"><span class="Apple-converted-space">            </span>simDetailsCard.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>simDetailsCard.classList.add('flex');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simNameDisplay').textContent = sim.name;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simTitleDisplay').textContent = sim.title;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Set initial image and active age icon based on sim.age</p>
<p class="p1"><span class="Apple-converted-space">            </span>// This is crucial to show the image based on the Sim's current age.</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateSimImageForAge(sim, sim.age);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simBioText').textContent = sim.bio;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simAge').textContent = sim.age;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simGender').textContent = sim.gender;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const simStatusElement = document.getElementById('simStatus');</p>
<p class="p1"><span class="Apple-converted-space">            </span>simStatusElement.textContent = sim.status;</p>
<p class="p1"><span class="Apple-converted-space">            </span>simStatusElement.className = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>simStatusElement.classList.add(sim.status.toLowerCase() === 'alive' ? 'status-alive' : 'status-dead');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simOccultStatus').textContent = sim.occultStatus || 'Human';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Display career and career level</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simCareer').textContent = `${sim.career} (Level ${sim.careerLevel || 'N/A'})`;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simAspiration').textContent = sim.aspiration;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simZodiac').textContent = sim.zodiac || 'N/A'; // Display Zodiac</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Handle Partners</p>
<p class="p1"><span class="Apple-converted-space">            </span>const simPartnersElement = document.getElementById('simPartners');</p>
<p class="p1"><span class="Apple-converted-space">            </span>simPartnersElement.innerHTML = ''; // Clear previous partners</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (sim.partners &amp;&amp; sim.partners.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>sim.partners.forEach((partnerName, index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const partnerLink = document.createElement('span');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>partnerLink.classList.add('partner-link');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>partnerLink.textContent = partnerName;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>partnerLink.onclick = (event) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>event.stopPropagation(); // Prevent modal from opening when clicking partner link</p>
<p class="p1"><span class="Apple-converted-space">                        </span>selectSim(partnerName);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>};<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>simPartnersElement.appendChild(partnerLink);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (index &lt; sim.partners.length - 1) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>simPartnersElement.append(', '); // Add comma separator for multiple partners</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>simPartnersElement.textContent = 'None';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Handle Parents</p>
<p class="p1"><span class="Apple-converted-space">            </span>const simParentsElement = document.getElementById('simParents');</p>
<p class="p1"><span class="Apple-converted-space">            </span>simParentsElement.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (sim.parents &amp;&amp; sim.parents.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>sim.parents.forEach((parentName, index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const parentLink = document.createElement('span');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>parentLink.classList.add('partner-link'); // Reuse partner-link style for consistency</p>
<p class="p1"><span class="Apple-converted-space">                    </span>parentLink.textContent = parentName;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>parentLink.onclick = (event) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>event.stopPropagation();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>selectSim(parentName);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>};</p>
<p class="p1"><span class="Apple-converted-space">                    </span>simParentsElement.appendChild(parentLink);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (index &lt; sim.parents.length - 1) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>simParentsElement.append(', ');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>simParentsElement.textContent = 'None';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Handle Children</p>
<p class="p1"><span class="Apple-converted-space">            </span>const simChildrenElement = document.getElementById('simChildren');</p>
<p class="p1"><span class="Apple-converted-space">            </span>simChildrenElement.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (sim.children &amp;&amp; sim.children.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>sim.children.forEach((childName, index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const childLink = document.createElement('span');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>childLink.classList.add('partner-link'); // Reuse partner-link style</p>
<p class="p1"><span class="Apple-converted-space">                    </span>childLink.textContent = childName;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>childLink.onclick = (event) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>event.stopPropagation();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>selectSim(childName);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>};</p>
<p class="p1"><span class="Apple-converted-space">                    </span>simChildrenElement.appendChild(childLink);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (index &lt; sim.children.length - 1) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>simChildrenElement.append(', ');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>simChildrenElement.textContent = 'None';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const traitsList = document.getElementById('simTraitList');</p>
<p class="p1"><span class="Apple-converted-space">            </span>traitsList.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>sim.traits.forEach(trait =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const span = document.createElement('span');</p>
<p class="p1"><span class="Apple-converted-space">                </span>span.classList.add('sim-trait-item-redesign');</p>
<p class="p1"><span class="Apple-converted-space">                </span>span.textContent = trait;</p>
<p class="p1"><span class="Apple-converted-space">                </span>traitsList.appendChild(span);</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const hobbiesList = document.getElementById('simHobbiesList');</p>
<p class="p1"><span class="Apple-converted-space">            </span>hobbiesList.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>sim.hobbies.forEach(hobby =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const li = document.createElement('li');</p>
<p class="p1"><span class="Apple-converted-space">                </span>li.textContent = hobby;</p>
<p class="p1"><span class="Apple-converted-space">                </span>hobbiesList.appendChild(li);</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simNotes').textContent = sim.notes;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Collect notes for the notes section</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (sim.notes &amp;&amp; sim.notes.trim() !== '') {</p>
<p class="p1"><span class="Apple-converted-space">                </span>collectedSimNotes.set(sim.name, sim.notes);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const simAgeIconsContainer = document.getElementById('simAgeIconsContainer');</p>
<p class="p1"><span class="Apple-converted-space">            </span>simAgeIconsContainer.innerHTML = ''; // Clear existing icons</p>
<p class="p1"><span class="Apple-converted-space">            </span>const lifeStages = ["Baby", "Toddler", "Child", "Teen", "Young Adult", "Adult", "Elder"];</p>
<p class="p1"><span class="Apple-converted-space">            </span>lifeStages.forEach(stage =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const iconSpan = document.createElement('span');</p>
<p class="p1"><span class="Apple-converted-space">                </span>iconSpan.classList.add('age-icon');</p>
<p class="p1"><span class="Apple-converted-space">                </span>iconSpan.textContent = lifeStagesIcons[stage] || '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>iconSpan.dataset.age = stage; // Store age in data attribute for selection</p>
<p class="p1"><span class="Apple-converted-space">                </span>iconSpan.onclick = () =&gt; updateSimImageForAge(sim, stage);</p>
<p class="p1"><span class="Apple-converted-space">                </span>simAgeIconsContainer.appendChild(iconSpan);</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Re-apply active state based on the current sim's age after all icons are created</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateSimImageForAge(sim, sim.age);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Populate skills list</p>
<p class="p1"><span class="Apple-converted-space">            </span>const simSkillsList = document.getElementById('simSkillsList');</p>
<p class="p1"><span class="Apple-converted-space">            </span>simSkillsList.innerHTML = ''; // Clear existing skills</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (const skillName in sim.skills) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const skillLevel = sim.skills[skillName];</p>
<p class="p1"><span class="Apple-converted-space">                </span>const skillItem = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">                </span>skillItem.classList.add('sim-skills-list-item');</p>
<p class="p1"><span class="Apple-converted-space">                </span>skillItem.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="sim-skills-list-item-label relative z-20"&gt;${skillName}:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="sim-skills-list-item-value relative z-20"&gt;${skillLevel}/10&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>simSkillsList.appendChild(skillItem);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Populate Personality section</p>
<p class="p1"><span class="Apple-converted-space">            </span>const simPersonalitySection = document.getElementById('simPersonalitySection');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const simPersonalityList = document.getElementById('simPersonalityList');</p>
<p class="p1"><span class="Apple-converted-space">            </span>simPersonalityList.innerHTML = ''; // Clear previous</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!sim.personality || Object.keys(sim.personality).length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>simPersonalitySection.classList.add('hidden'); // Hide the entire section if no personality data</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>simPersonalitySection.classList.remove('hidden');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const personalityMapping = {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"sloppyNeat": { label: "Sloppy - Neat" },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"shyOutgoing": { label: "Shy - Outgoing" },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"lazyActive": { label: "Lazy - Active" },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"seriousPlayful": { label: "Serious - Playful" },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>"grouchyNice": { label: "Grouchy - Nice" }</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>for (const key in personalityMapping) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (sim.personality.hasOwnProperty(key)) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const value = sim.personality[key]; // Value is directly 1-10</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const label = personalityMapping[key].label;</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>const itemDiv = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>itemDiv.classList.add('personality-item');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>let valueClass = 'personality-item-value';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (value &gt;= 1 &amp;&amp; value &lt;= 4) { // Leaning towards low</p>
<p class="p1"><span class="Apple-converted-space">                            </span>valueClass += ' low';</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} else if (value &gt;= 7 &amp;&amp; value &lt;= 10) { // Leaning towards high</p>
<p class="p1"><span class="Apple-converted-space">                            </span>valueClass += ' high';</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} else { // Balanced (5-6)</p>
<p class="p1"><span class="Apple-converted-space">                            </span>valueClass += ' balanced';</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>itemDiv.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;span class="personality-item-label relative z-20"&gt;${label}:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;span class="${valueClass} relative z-20"&gt;${value}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>`;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>simPersonalityList.appendChild(itemDiv);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function hideSimDetails() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simDetailsCard').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('simDetailsCard').classList.remove('flex');</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentSelectedSim = null; // Important: Clear selected sim when card is hidden</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateFamilyList();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function displayFamilyOverview(familyName) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const family = simData[familyName];</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (family &amp;&amp; family.familyBio) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('familyOverviewContent').classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('familyOverviewContent').classList.add('flex');</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Update the family name in the h4 header</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('familyOverviewTitleName').textContent = family.familyBio.name;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Update other family details</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('familyLocation').textContent = family.familyBio.location;</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('familyMemberCount').textContent = family.members.length; // Dynamic member count</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('familyFunds').textContent = family.familyBio.funds;</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('familyBiography').textContent = family.familyBio.biography;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>// If family data is missing for some reason, hide it.</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('familyOverviewContent').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('familyOverviewContent').classList.remove('flex');</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function hideFamilyOverview() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('familyOverviewContent').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('familyOverviewContent').classList.remove('flex');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Function to get all sims from all sources (families and homeless)</p>
<p class="p1"><span class="Apple-converted-space">        </span>function getAllSims() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>let allSims = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (const familyKey in simData) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (familyKey === "worldInfo") continue;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (familyKey === "homelessSims") {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>simData[familyKey].forEach(sim =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>allSims.push({ ...sim, family: 'Homeless' }); // Add a 'family' property for sorting</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const family = simData[familyKey];</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (family &amp;&amp; family.members) { // Check if family and members exist</p>
<p class="p1"><span class="Apple-converted-space">                        </span>family.members.forEach(sim =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>allSims.push({ ...sim, family: family.familyBio.name.replace(' Family', '') });</p>
<p class="p1"><span class="Apple-converted-space">                        </span>});</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>return allSims;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function populateSpreadsheet(sortColumn = currentSortColumn, sortDirection = currentSortDirection) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const simsTableBody = document.getElementById('simsTableBody');</p>
<p class="p1"><span class="Apple-converted-space">            </span>simsTableBody.innerHTML = '';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>let allSims = getAllSims();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Store current sort state</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentSortColumn = sortColumn;</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentSortDirection = sortDirection;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Sorting logic</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (sortColumn) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>allSims.sort((a, b) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>let valA = a[sortColumn];</p>
<p class="p1"><span class="Apple-converted-space">                    </span>let valB = b[sortColumn];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Handle specific sorting cases for better results</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (sortColumn === 'age') {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const ageOrder = {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"Baby": 0, "Toddler": 1, "Child": 2, "Teen": 3,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>"Young Adult": 4, "Adult": 5, "Elder": 6</p>
<p class="p1"><span class="Apple-converted-space">                        </span>};</p>
<p class="p1"><span class="Apple-converted-space">                        </span>valA = ageOrder[valA] !== undefined ? ageOrder[valA] : 99;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>valB = ageOrder[valB] !== undefined ? ageOrder[valB] : 99;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} else if (sortColumn === 'status') {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>// Alive before Dead</p>
<p class="p1"><span class="Apple-converted-space">                        </span>valA = valA === 'Alive' ? 0 : 1;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>valB = valB === 'Alive' ? 0 : 1;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>// Default to string comparison for others, case-insensitive</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (typeof valA === 'string') valA = valA.toLowerCase();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (typeof valB === 'string') valB = valB.toLowerCase();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (valA &lt; valB) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return sortDirection === 'asc' ? -1 : 1;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (valA &gt; valB) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return sortDirection === 'asc' ? 1 : -1;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>allSims.forEach(sim =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const row = document.createElement('tr'); // Create a table row element</p>
<p class="p1"><span class="Apple-converted-space">                </span>simsTableBody.appendChild(row); // Append the row to the tbody</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>row.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="py-2 px-4"&gt;&lt;span class="clickable-sim-name" onclick="selectSim('${sim.name}')"&gt;${sim.name}&lt;/span&gt;&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="py-2 px-4"&gt;${sim.family}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="py-2 px-4"&gt;${sim.age}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="py-2 px-4"&gt;&lt;span class="${sim.status.toLowerCase() === 'alive' ? 'status-alive' : 'status-dead'}"&gt;${sim.status}&lt;/span&gt;&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="py-2 px-4"&gt;${sim.career} (Level ${sim.careerLevel || 'N/A'})&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td class="py-2 px-4"&gt;${sim.aspiration}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update sort icons</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.querySelectorAll('.sortable-th').forEach(th =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>th.classList.remove('asc', 'desc');</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (th.dataset.sort === sortColumn) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>th.classList.add(sortDirection);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function toggleSpreadsheet() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const spreadsheetContainer = document.getElementById('spreadsheetView');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const collapsibleContent = spreadsheetContainer.querySelector('.collapsible-content');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (spreadsheetContainer.classList.contains('hidden') || spreadsheetContainer.classList.contains('collapsed')) {</p>
<p class="p1"><span class="Apple-converted-space">                 </span>hideAllContentSections();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>spreadsheetContainer.classList.toggle('collapsed');</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (spreadsheetContainer.classList.contains('collapsed')) {</p>
<p class="p1"><span class="Apple-converted-space">                 </span>collapsibleContent.style.maxHeight = '0';</p>
<p class="p1"><span class="Apple-converted-space">                 </span>spreadsheetContainer.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                 </span>spreadsheetContainer.classList.remove('flex');</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                 </span>spreadsheetContainer.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                 </span>spreadsheetContainer.classList.add('flex');</p>
<p class="p1"><span class="Apple-converted-space">                 </span>requestAnimationFrame(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                     </span>collapsibleContent.style.maxHeight = collapsibleContent.scrollHeight + 'px';</p>
<p class="p1"><span class="Apple-converted-space">                 </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function showSpreadsheet() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>hideAllContentSections(); // Hide all other content first</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('spreadsheetView').classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('spreadsheetView').classList.remove('collapsed');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('spreadsheetView').classList.add('flex');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('spreadsheetView').querySelector('.collapsible-content').classList.remove('collapsed');</p>
<p class="p1"><span class="Apple-converted-space">            </span>requestAnimationFrame(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('spreadsheetView').querySelector('.collapsible-content').style.maxHeight = document.getElementById('spreadsheetView').querySelector('.collapsible-content').scrollHeight + 'px';</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Repopulate spreadsheet with current sort</p>
<p class="p1"><span class="Apple-converted-space">            </span>populateSpreadsheet(currentSortColumn, currentSortDirection);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function hideSpreadsheet() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('spreadsheetView').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('spreadsheetView').classList.add('collapsed');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('spreadsheetView').classList.remove('flex');</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (document.getElementById('spreadsheetView').querySelector('.collapsible-content')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('spreadsheetView').querySelector('.collapsible-content').classList.add('collapsed');</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('spreadsheetView').querySelector('.collapsible-content').style.maxHeight = '0';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function displayNeighborhoodStories() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>hideAllContentSections(); // Hide all other content first</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const storyDisplayContent = document.getElementById('storyDisplayContent');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const storyList = document.getElementById('storyList');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const storyListContainer = document.getElementById('storyListContainer');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const singleStoryContainer = document.getElementById('singleStoryContainer');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>storyDisplayContent.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>storyDisplayContent.classList.add('flex');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>storyListContainer.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>singleStoryContainer.classList.add('hidden');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>storyList.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (neighborhoodStories &amp;&amp; neighborhoodStories.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>neighborhoodStories.forEach((story, index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const storyItem = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>storyItem.classList.add('story-list-item', 'px-4', 'py-2', 'rounded-md', 'shadow-sm', 'cursor-pointer');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>storyItem.innerHTML = `&lt;span class="relative z-20"&gt;${story.headline}&lt;/span&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>storyItem.onclick = () =&gt; showSingleStory(story);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>storyList.appendChild(storyItem);</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>storyList.innerHTML = '&lt;p class="text-center text-muted-dark relative z-20"&gt;No neighborhood stories yet!&lt;/p&gt;';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Ensure the storyList has its max-height and overflow for the list view</p>
<p class="p1"><span class="Apple-converted-space">            </span>storyList.classList.add('max-h-96', 'scrollable-list');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function showSingleStory(story) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('storyListContainer').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('singleStoryContainer').classList.remove('hidden');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const storyImageContainer = document.querySelector('#singleStoryContainer .story-image-container');</p>
<p class="p1"><span class="Apple-converted-space">            </span>storyImageContainer.onclick = () =&gt; openImageModal(document.getElementById('storyImage').src);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const storyImageElement = document.getElementById('storyImage');</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Use a placeholder if no specific image URL is provided in story data</p>
<p class="p1"><span class="Apple-converted-space">            </span>const encodedHeadlineForImage = encodeURIComponent(story.headline);</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Changed placeholder colors to fit the new theme</p>
<p class="p1"><span class="Apple-converted-space">            </span>storyImageElement.src = `https://placehold.co/400x225/${encodeURIComponent('DCC29F')}/${encodeURIComponent('3A3A3A')}?text=Story%20Image%0A${encodedHeadlineForImage.substring(0, 30)}...`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>storyImageElement.alt = story.headline; // Set alt text</p>
<p class="p1"><span class="Apple-converted-space">            </span>storyImageElement.classList.remove('hidden');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// This is the crucial line to ensure content is displayed</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('storyContent').textContent = story.content;</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Ensure storyList loses its max-height and overflow when a single story is shown</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('storyList').classList.remove('max-h-96', 'scrollable-list');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function showStoryList() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('storyListContainer').classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('singleStoryContainer').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Restore max-height and overflow for the story list when going back</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('storyList').classList.add('max-h-96', 'scrollable-list');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function hideNeighborhoodStories() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('storyDisplayContent').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('storyDisplayContent').classList.remove('flex');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function populateGraveyard() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const graveyardGrid = document.getElementById('graveyardGrid');</p>
<p class="p1"><span class="Apple-converted-space">            </span>graveyardGrid.innerHTML = ''; // Clear existing items</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>let deadSimsFound = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Iterate through all families (including dynamically generated ones)</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (const familyName in simData) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (familyName === "worldInfo" || familyName === "homelessSims") continue;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const family = simData[familyName];</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (family &amp;&amp; family.members) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>family.members.forEach(sim =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (sim.status === "Dead") {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>deadSimsFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>const graveyardItem = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">                            </span>graveyardItem.classList.add('graveyard-item');</p>
<p class="p1"><span class="Apple-converted-space">                            </span>// Add onclick to navigate to sim details</p>
<p class="p1"><span class="Apple-converted-space">                            </span>graveyardItem.onclick = () =&gt; selectSim(sim.name);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>graveyardItem.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div class="graveyard-icon relative z-20"&gt;🪦&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div class="relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;h5&gt;${sim.name}&lt;/h5&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;p&gt;${sim.title}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>`;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>graveyardGrid.appendChild(graveyardItem);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Also check homeless sims for dead ones</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (simData.homelessSims) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>simData.homelessSims.forEach(sim =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (sim.status === "Dead") {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>deadSimsFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const graveyardItem = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>graveyardItem.classList.add('graveyard-item');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>graveyardItem.onclick = () =&gt; selectSim(sim.name);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>graveyardItem.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="graveyard-icon relative z-20"&gt;🪦&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;h5&gt;${sim.name}&lt;/h5&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;p&gt;${sim.title}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>`;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>graveyardGrid.appendChild(graveyardItem);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!deadSimsFound) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>graveyardGrid.innerHTML = '&lt;p class="col-span-full text-center text-muted-dark relative z-20"&gt;No Sims in the graveyard... yet.&lt;/p&gt;';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function showGraveyard() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>hideAllContentSections(); // Hide all other content first</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('graveyardSection').classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('graveyardSection').classList.add('flex');</p>
<p class="p1"><span class="Apple-converted-space">            </span>populateGraveyard(); // Populate the graveyard whenever it's shown</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function hideGraveyard() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('graveyardSection').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('graveyardSection').classList.remove('flex');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* NEW: Homeless Sims Functions */</p>
<p class="p1"><span class="Apple-converted-space">        </span>function populateHomelessSims() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const homelessSimsGrid = document.getElementById('homelessSimsGrid');</p>
<p class="p1"><span class="Apple-converted-space">            </span>homelessSimsGrid.innerHTML = ''; // Clear existing items</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (simData.homelessSims &amp;&amp; simData.homelessSims.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>simData.homelessSims.forEach(sim =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const homelessSimItem = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>homelessSimItem.classList.add('homeless-sim-item');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>homelessSimItem.onclick = () =&gt; selectSim(sim.name);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>homelessSimItem.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="graveyard-icon sim-stat-icon relative z-20"&gt;🏡&lt;/div&gt; &lt;!-- Using house emoji for homeless --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="relative z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h5&gt;${sim.name}&lt;/h5&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p&gt;${sim.title}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>homelessSimsGrid.appendChild(homelessSimItem);</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>homelessSimsGrid.innerHTML = '&lt;p class="col-span-full text-center text-muted-dark relative z-20"&gt;No homeless Sims found.&lt;/p&gt;';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function showHomelessSims() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>hideAllContentSections();</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('homelessSimsSection').classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('homelessSimsSection').classList.add('flex');</p>
<p class="p1"><span class="Apple-converted-space">            </span>populateHomelessSims();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function hideHomelessSims() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('homelessSimsSection').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('homelessSimsSection').classList.remove('flex');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function displayNotesSection() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>hideAllContentSections();</p>
<p class="p1"><span class="Apple-converted-space">            </span>const notesSection = document.getElementById('notesSection');</p>
<p class="p1"><span class="Apple-converted-space">            </span>notesSection.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>notesSection.classList.add('flex');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const notesContentDiv = document.getElementById('notesContent');</p>
<p class="p1"><span class="Apple-converted-space">            </span>notesContentDiv.innerHTML = ''; // Clear previous notes</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (collectedSimNotes.size === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>notesContentDiv.innerHTML = '&lt;p class="text-center text-muted-dark relative z-20"&gt;No notes collected yet. Visit a Sim\'s biography to add their notes here!&lt;/p&gt;';</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>collectedSimNotes.forEach((note, simName) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const noteEntry = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>noteEntry.classList.add('section-block-style', 'relative', 'z-20', 'mb-4'); // Reuse style</p>
<p class="p1"><span class="Apple-converted-space">                    </span>noteEntry.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h5 class="text-xl font-semibold mb-2 text-accent-brown relative z-20"&gt;${simName}'s Notes:&lt;/h5&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p class="text-base leading-relaxed relative z-20"&gt;${note}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>notesContentDiv.appendChild(noteEntry);</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Image Modal Functions</p>
<p class="p1"><span class="Apple-converted-space">        </span>function openImageModal(imgSrc) { // Modified to accept src directly</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('modalImage').src = imgSrc;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('imageModal').classList.add('visible');</p>
<p class="p1"><span class="Apple-converted-space">            </span>// No longer need to remove 'hidden' class as it's not used for display toggling</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function closeImageModal() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('imageModal').classList.remove('visible');</p>
<p class="p1"><span class="Apple-converted-space">            </span>// No longer need to add 'hidden' class</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('modalImage').src = '';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Event listener for closing modal with Escape key</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.addEventListener('keydown', function(event) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (event.key === 'Escape') {</p>
<p class="p1"><span class="Apple-converted-space">                </span>closeImageModal();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Theme Toggle Logic</p>
<p class="p1"><span class="Apple-converted-space">        </span>function applyTheme(theme) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const body = document.body;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const toggleIcon = document.getElementById('themeToggle').querySelector('i');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (theme === 'dark') {</p>
<p class="p1"><span class="Apple-converted-space">                </span>body.classList.add('dark-theme');</p>
<p class="p1"><span class="Apple-converted-space">                </span>toggleIcon.classList.remove('fa-sun');</p>
<p class="p1"><span class="Apple-converted-space">                </span>toggleIcon.classList.add('fa-moon');</p>
<p class="p1"><span class="Apple-converted-space">                </span>localStorage.setItem('theme', 'dark');</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>body.classList.remove('dark-theme');</p>
<p class="p1"><span class="Apple-converted-space">                </span>toggleIcon.classList.remove('fa-moon');</p>
<p class="p1"><span class="Apple-converted-space">                </span>toggleIcon.classList.add('fa-sun');</p>
<p class="p1"><span class="Apple-converted-space">                </span>localStorage.setItem('theme', 'light');</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Initialize display</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.addEventListener('DOMContentLoaded', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Generate dynamic data first</p>
<p class="p1"><span class="Apple-converted-space">            </span>generateAllDynamicData();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Apply saved theme or default to light</p>
<p class="p1"><span class="Apple-converted-space">            </span>const savedTheme = localStorage.getItem('theme') || 'light';</p>
<p class="p1"><span class="Apple-converted-space">            </span>applyTheme(savedTheme);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Set World Info</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('worldNameDisplay').textContent = simData.worldInfo.name;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('worldDescriptionDisplay').textContent = simData.worldInfo.description;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>updateFamilyList(); // This now correctly handles initial collapse/expand state</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Set initial sort state for spreadsheet</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentSortColumn = 'name'; // Default sort column</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentSortDirection = 'asc'; // Default sort direction</p>
<p class="p1"><span class="Apple-converted-space">            </span>populateSpreadsheet(currentSortColumn, currentSortDirection); // Populate with initial sort</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>populateGraveyard(); // Populate graveyard on load</p>
<p class="p1"><span class="Apple-converted-space">            </span>populateHomelessSims(); // Populate homeless sims on load</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Initially display the family overview for the default selected family</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Ensure all other sections are hidden initially</p>
<p class="p1"><span class="Apple-converted-space">            </span>hideAllContentSections();</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (currentSelectedFamily) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>displayFamilyOverview(currentSelectedFamily);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Set up event listeners for the static navigation buttons</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('showSpreadsheetBtn').addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showSpreadsheet();</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('showNeighborhoodStoriesBtn').addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>displayNeighborhoodStories();</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('showGraveyardBtn').addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showGraveyard();</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('showHomelessSimsBtn').addEventListener('click', () =&gt; { /* NEW: Homeless Sims button listener */</p>
<p class="p1"><span class="Apple-converted-space">                </span>showHomelessSims();</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('showNotesBtn').addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>displayNotesSection();</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Theme toggle event listener</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('themeToggle').addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const currentTheme = document.body.classList.contains('dark-theme') ? 'dark' : 'light';</p>
<p class="p1"><span class="Apple-converted-space">                </span>applyTheme(currentTheme === 'light' ? 'dark' : 'light');</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Add event listeners for sortable table headers</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.querySelectorAll('.sortable-th').forEach(header =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>header.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const column = header.dataset.sort;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>let direction = 'asc';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// If clicking the same column, toggle direction</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (currentSortColumn === column) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>direction = currentSortDirection === 'asc' ? 'desc' : 'asc';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>populateSpreadsheet(column, direction);</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
